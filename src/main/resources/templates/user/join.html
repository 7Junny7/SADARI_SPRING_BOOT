<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
<style type="text/css">
input[type=text], input[type=password]{
border-top: 0;
border-right: 0;
border-left: 0;
border-bottom: 0.5px solid grey;
}
td{
padding:5px;
}

</style>
<script>
function subj(){
	var userId = $("#userId").val();
	var userPassword = $("#userPasword").val();
	var userPassword2 = $("#userPassword2").val();
	var userNickName = $("#userNickName").val();
	var userBirth = $("userBirth").val();
	var userPhone =$("userPhone").val();
	alert(userId+":"+userPassword+":"+userPassword2+":"+userNickName+":"+userBirth+":"+userPhone);
	
	//아이디 빈칸 확인
	if(userId.length == 0){
		alert("아이디를 입력해 주세요!");
		return false;
	}
	//암호 빈칸 확인 & 암호 일치 확인
	if(userPassword.length == 0 || userPassword2.length == 0){
		alert("비밀번호를 입력해 주세요!");
		return false;
	}else if(userPassword != userPassword2){
		alert("비밀번호가 일치하지 않습니다.");
		return false;
	}
	//닉네임 빈칸 확인
	if(userNickName.length == 0){
		alert("닉네임을 입력해 주세요!");
		return false;
	}
	//생년월일 확인
	if(userBirth.length == 0){
		alert("생년월일을 입력해 주세요!");
		return false;
	}
	//폰번호 확인
	if(userPhone.length == 0){
		alert("핸드폰 번호를 입력해 주세요!");
		return false;
	}
	return false;
}
</script>
</head>
<body>
<div class="container" style="margin-top:100px">
<div class="row">
<div class="col-xs-6">
		<div class="card shadow" style="background-color: pink">
				<div class="card-body">
			<h2>회원가입</h2>
	<form th:action="@{/join_pro}" method="post" onsubmit="return subj();" style="background-color: white; text-align: center;">
	<input type="hidden" id="userIdExist"> 
	<table style="border: 0; border-radius: 10px">
		<tr>
			<td>아이디 </td><td><input type="text" name="userId" id="userId" onkeypress="resetUserIdExist()" placeholder="아이디를 입력하시오"><br>
				<button class="idCheck" id="temp" style="background-color: pink; border: 0; border-radius: 10px" onclick="checkUserIdExist()">아이디 중복확인</button>
				<div class="text-center small mt-2" id="checkMsg" style="color: red"></div></td>
		</tr>
		<tr>
			<td>비밀번호 </td><td><input type="password" name="userPassword" id="userPassword" placeholder="4~20자 (알파벳/숫자 )"><br></td>
		</tr>
		<tr>
			<td>비밀번호확인 </td><td><input type="password" name="userPassword2" id="userPassword2" placeholder="비밀번호 확인"><br></td>
		</tr>
		<!-- 이름 : <input type="text" name="userName" id="userName"><br> -->
		<tr>
			<td>별명 </td><td><input type="text" name="userNickName" id="userNickName" placeholder="별명"><br></td>
		</tr>
		<tr>
			<td>생년월일 </td><td><input type="text" name="userBirth" id="userBirth" placeholder="YYMMDD"><br></td>
		</tr>
		<tr>
		<td>성별</td>
			<td>남<input type="radio" name="userGender" id="userGender" value="M" checked> 
							여 <input type="radio" name="userGender" id="userGender" value="F"><br></td>
		</tr>
		<!-- 이메일 : <input type="text" name="userEmail" id="userEmail"><br> -->
		<tr>
			<td>전화번호 </td><td><input type="text" name="userPhone" id="userPhone" placeholder="-없이 숫자만 입력"><br></td>
		</tr>
		<tr>
			<td colspan="2"><input type="submit" style="background-color: pink; border: 0; border-radius: 10px" value="보내기"></td>
		</tr>
		</table>
	</form>
	
	</div>
	</div>
	</div>
	</div>
</div>
	<script type="text/javascript">
	/*
	$('.idCheck').click(function(){
		$.ajax({
			type:"get",
			url:"join",
			data:{
				"id":$('#userId').val()
			},
			success: function(data){
				if($.trim(data)=="yes"){
					if($('#userId').val()!=''){
						$('#checkMsg').html('<p sytle="color:blue">사용 가능한 ID 입니다.</p>');
					}
				}else{
					if($('#userId').val()!=''){
						$('#checkMsg').html('<p style="color:red">이미 사용중인 ID 입니다.</p>');
						$('#userId').val('');
						$('#userId').focus();
					}
				}
			}
		})
	});
	*/

	
function checkUserIdExist(){
	alert("ac8");
	var user_id = $("#userId").val()
	if(user_id.length == 0){
		alert('아이디를 입력해주세요')
		return false;
	}
	$.ajax({
		url : '${root}user/checkUserIdExist/' + user_id,
		type : 'get',
		dataType : 'text',
		success : function(result){
			if(result.trim() == 'true'){
				alert('사용할 수 있는 아이디입니다')
				$("#userIdExist").val('true')
			} else {
				alert('사용할 수 없는 아이디 입니다')
				$("#userIdExist").val('false')
			}
		}
	})
	return false;
}

function resetUserIdExist(){
	$("#userIdExist").val('false')
}
</script>
</body>
</html>